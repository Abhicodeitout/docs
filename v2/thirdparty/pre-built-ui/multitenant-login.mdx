---
id: multitenant-login
title: "Multitenant and Enterprise SSO login"
hide_title: true
---

import AppInfoForm from "/src/components/appInfoForm"
import BackendSDKTabs from "/src/components/tabs/BackendSDKTabs";
import PythonSyncAsyncSubTabs from "/src/components/tabs/PythonSyncAsyncSubTabs";
import GoFrameworkSubTabs from "/src/components/tabs/GoFrameworkSubTabs";
import TabItem from '@theme/TabItem';
import MultiTenancyPaidBanner from '../reusableMD/multitenancy/MultiTenancyPaidBanner.mdx'
import CoreInjector from "/src/components/coreInjector"
import FrontendPreBuiltUITabs from "/src/components/tabs/FrontendPreBuiltUITabs"

<!-- COPY SECTION -->
<!-- ./thirdparty/pre-built-ui/multitenant-login.mdx  -->
<!-- 1 -->

<MultiTenancyPaidBanner />

# Multitenant and Enterprise SSO login

Multitenant login is a feature that let's you customize login experience for each of your customers. For example, a customer `customer1` hosted on `customer1.yourdomain.com` can have login with `Active Directory` and `Google`, and another customer `customer2` hosted on `customer2.yourdomain.com` can have login with `Okta` and `Facebook`.

This is also the page that you should see if you want to implement sign in with:
- Okta
- SAML
- Active Directory
- Google Workspaces
- Or any other workforce IdP

<!-- END COPY SECTION -->

<!-- COPY SECTION -->
<!-- ./thirdparty/pre-built-ui/multitenant-login.mdx  -->
<!-- 2 -->

## Step 1: Create a new tenant in SuperTokens core

Use the endpoint below to create a tenant.

The `tenantId` is a unique identifier for each tenant. The `emailpasswordEnabled`, `thirdpartyEnabled` and `passwordlessEnabled` flags indicate whether the tenant has enabled the corresponding login method.

<BackendSDKTabs enableCurl>

<TabItem value="nodejs">

```tsx
TODO
```

</TabItem>
<TabItem value="go">

```go
TODO
```

</TabItem>
<TabItem value="python">

<PythonSyncAsyncSubTabs>
<TabItem value="asyncio">

```python
TODO
```

</TabItem>

<TabItem value="syncio">

```python
TODO
```

</TabItem>
</PythonSyncAsyncSubTabs>

</TabItem>

<TabItem value="curl">

<CoreInjector defaultValue="http://localhost:3567">

```bash
curl --location --request PUT '^{coreInjector_uri_without_quotes}/recipe/multitenancy/tenant' \
--header 'api-key: ^{coreInjector_api_key_without_quotes}' \
--header 'Content-Type: application/json' \
--data-raw '{
    "tenantId": "...",
    "emailpasswordEnabled": true,
    "thirdpartyEnabled": true,
    "passwordlessEnabled": true
}'
```

</CoreInjector>

</TabItem>

</BackendSDKTabs>

Once a tenant is created, add their thirdparty providers using the endpoint below.

<BackendSDKTabs enableCurl>

<TabItem value="nodejs">

```tsx
TODO
```

</TabItem>
<TabItem value="go">

```go
TODO
```

</TabItem>
<TabItem value="python">

<PythonSyncAsyncSubTabs>
<TabItem value="asyncio">

```python
TODO
```

</TabItem>

<TabItem value="syncio">

```python
TODO
```

</TabItem>
</PythonSyncAsyncSubTabs>

</TabItem>

<TabItem value="curl">

<CoreInjector defaultValue="http://localhost:3567">

```bash
curl --location --request PUT '^{coreInjector_uri_without_quotes}/recipe/multitenancy/config/thirdparty' \
--header 'api-key: ^{coreInjector_api_key_without_quotes}' \
--header 'Content-Type: application/json' \
--data-raw '{
  "config": {
    "tenantId": "...",
    "thirdPartyId": "active-directory",
    "name": "Active Directory",
    "clients": [
      {
        "clientId": "string",
        "clientSecret": "string",
        "additionalConfig": {
          "directoryId": "..."
        }
      }
    ]
  }
}'
```

</CoreInjector>

</TabItem>

</BackendSDKTabs>


<!-- END COPY SECTION -->

## Step 2: Frontend setup

Modify the `SuperTokens.init` to do the following:
1. Set the `usesDynamicLoginMethods` to true.
2. Initialize the `Multitenancy` recipe and provide `getTenantId` config function.

<AppInfoForm
    askForAppName
    askForAPIDomain
    askForWebsiteDomain
>

<FrontendPreBuiltUITabs>
<TabItem value="reactjs">

```tsx
import React from 'react';

import SuperTokens, { SuperTokensWrapper } from "supertokens-auth-react";
import ThirdParty from "supertokens-auth-react/recipe/thirdparty";
import Session from "supertokens-auth-react/recipe/session";
import Multitenancy from "supertokens-auth-react/recipe/multitenancy";

SuperTokens.init({
    appInfo: {
        // learn more about this on https://supertokens.com/docs/thirdpartyemailpassword/appinfo
        appName: "^{form_appName}",
        apiDomain: "^{form_apiDomain}",
        websiteDomain: "^{form_websiteDomain}",
        apiBasePath: "^{form_apiBasePath}",
        websiteBasePath: "^{form_websiteBasePath}"
    },
    // highlight-start
    usesDynamicLoginMethods: true,
    // highlight-end
    recipeList: [
        // highlight-start
        ThirdParty.init(),
        // highlight-end
        Session.init(),
        // highlight-start
        Multitenancy.init({
          getTenantId: async () => {
            // Logic to determine the tenant id.
            // For example, it could be the current sub domain
            return "..."
          }
        })
        // highlight-end
    ]
});
```

</TabItem>

<TabItem value="angular">

:::important
SuperTokens does not provide Angular components for pre built UI, but, there are two ways of implementing SuperTokens in your Angular frontend:
- Load SuperTokens's pre-built React UI components in your Angular app. Continue following the guide for this flow.
- Build your own UI. Click [here](../../custom-ui/init/frontend) to learn more.
:::


```tsx
TODO
```

</TabItem>

<TabItem value="vue">

:::important
SuperTokens does not provide Vue components for pre built UI, but, there are two ways of implementing SuperTokens in your Vue frontend:
- Load SuperTokens's pre-built React UI components in your Vue app. Continue following the guide for this flow.
- Build your own UI. Click [here](../../custom-ui/init/frontend) to learn more.
:::

```tsx
TODO
```

</TabItem>

</FrontendPreBuiltUITabs>

</AppInfoForm>

<!-- COPY SECTION -->
<!-- ./thirdparty/pre-built-ui/multitenant-login.mdx  -->
<!-- 3 -->

## Step 3: Backend setup

If you are using different domains or sub-domains for each tenant on the frontend, your backend CORS setting needs to be updated to allow requests from those origins.

<BackendSDKTabs>
<TabItem value="nodejs">

```tsx
TODO
```
</TabItem>
<TabItem value="go">

<GoFrameworkSubTabs>

<TabItem value="http">

```go
import (
	"net/http"
	"strings"

	"github.com/supertokens/supertokens-golang/supertokens"
)

func corsMiddleware(next http.Handler) http.Handler {
	return http.HandlerFunc(func(response http.ResponseWriter, r *http.Request) {
		// highlight-start
		origin := r.Header.Get("Origin")
		if isAllowedOrigin(origin) {
			response.Header().Set("Access-Control-Allow-Origin", origin)
		}
		// highlight-end
		response.Header().Set("Access-Control-Allow-Credentials", "true")
		if r.Method == "OPTIONS" {
			// we add content-type + other headers used by SuperTokens
			response.Header().Set("Access-Control-Allow-Headers",
				strings.Join(append([]string{"Content-Type"},
					supertokens.GetAllCORSHeaders()...), ","))
			response.Header().Set("Access-Control-Allow-Methods", "*")
			response.Write([]byte(""))
		} else {
			next.ServeHTTP(response, r)
		}
	})
}

// highlight-start
func isAllowedOrigin(origin string) bool {
	// TODO: Return true if any of the tenants in your app use the input origin.
	return true
}
// highlight-end
```

</TabItem>

<TabItem value="chi">

```go
TODO
```

</TabItem>

<TabItem value="gin">

```go
TODO
```

</TabItem>

<TabItem value="mux">

```go
TODO
```

</TabItem>

</GoFrameworkSubTabs>

</TabItem>
<TabItem value="python">

```python
TODO
```

</TabItem>
</BackendSDKTabs>

<!-- END COPY SECTION -->

<!-- COPY SECTION -->
<!-- ./thirdparty/pre-built-ui/multitenant-login.mdx  -->
<!-- 4 -->

## See also

- [Single domain](../TODO) and [sub domain](../TODO) login.
- [Getting tenant id of logged in user](../TODO).
- [See all built in multitenant providers](../TODO).
- [See how to add custom multitenant provider](../TODO).
- [Allowing end users to add their own SSO provider](../TODO).
- [SAML login](../TODO).

<!-- END COPY SECTION -->
