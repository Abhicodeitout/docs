---
id: overview
title: Overview
hide_title: true
---

# Overview

The [core service](https://github.com/supertokens/supertokens-core) is a Java based http service that is stateless and concurrently safe.

By stateless, we mean that one can spin several instances of the core and sending a request to any one of them is alway identical to sending the same request to another one of them.

By concurrently safe, we mean that it is thread safe, as well as multi-process safe. This means that if an operation is not idempotent (like signing up a new user based on their email), doing that operation in parallel across different cores should have the same effect that these operations were instead run in a sequence. This in turn implies that we will have to use mutex locking with a core, or db transactions (with row level locking), or some concensus algorithm, or some distributed locking system. 

## Bootup
The following operations happen when the core is started:
- Loading and applying the CLI options into memory
- Registering a callback to handle the kill signal for the core
- Initialising the storage layer based on the db plugin that's available and the user config (or using an in memory db)
- Loading core configs
- Loading the version file (in case the core business logic needs it)
- Initialise logging (info and error logging)
- Starting Cronjobs
- Creating the storage layer tables if needed
- Starting the webserver
- Mark this process as started (so that the CLI can know that this is running).

## User configuration
User config is given via a `config.yaml` which is to be located in core's installation directory.

On bootup, this config file is loaded and checked for errors (like ranges of values). If there is an error, of if the file is missing, then the core doesn't start.

There is also a `devConfig.yaml` file which is used when running the core during development / testing.

The overall config file is made up of two config files:
- One from the supertokens-core's config.yaml file: This contains all the configs specific to the core's setting.
- Other from supertokens-DB_NAME-plugin's config.yaml file: This contains all the configs specific to the database's setting - like the db connection info.

When running using docker, the configs can be passed as env vars in the `docker run` command as well. Those are then copied into the config file when the docker image starts and the core service reads from the config file as usual.

Some configs are in the core, whilst most others are in the backend / frontend SDKs. We aim to put the configs in the backend / frontend SDKs whenever possible, since that is easier for users to set. However sometimes, (like if a cronjob in the core is accessing a config value), it would need to be in the core's config.yaml.

## Webserver
TODO:

## Cronjobs
TODO:

## Recipes
TODO:

## Storage Layer
TODO:

## In memory db
TODO: