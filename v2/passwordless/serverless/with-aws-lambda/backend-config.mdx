---
id: backend-config
title: 2. Backend config
hide_title: true
---

import AppInfoForm from "/src/components/appInfoForm"
import CoreInjector from "/src/components/coreInjector"
import { PasswordlessBackendForm } from "/src/components/snippetConfigForm/passwordlessBackendForm";

# 2. Backend config

## 1) Install supertokens package
```bash
npm i supertokens-node
```

## 2) Create a configuration file (`config.js`)
- Create a `config.js` file in the root directory of your project.
- An example of this file can be found [here](https://github.com/supertokens/supertokens-auth-react/blob/master/examples/with-aws-lambda/backend/config.js).


## 3) Create a backend config function

<AppInfoForm
    askForAppName={true}
    askForAPIDomain={true}
    askForWebsiteDomain={true}>

<PasswordlessBackendForm>
<CoreInjector>

```jsx title="config.js"

let Passwordless = require('supertokens-node/recipe/passwordless');
let Session = require('supertokens-node/recipe/session')

function getBackendConfig() {
  return {
    framework: "awsLambda",
    supertokens: {
      ^{coreInjector_connection_uri_comment}
      connectionURI: ^{coreInjector_uri}
      ^{coreInjector_api_key_commented}apiKey: ^{coreInjector_api_key},
    },
    appInfo: {
      // learn more about this on https://supertokens.io/docs/passwordless/appinfo
      appName: "^{form_appName}",
      apiDomain: "^{form_apiDomain}",
      websiteDomain: "^{form_websiteDomain}",
      apiGatewayPath: "/dev" // TODO: same as what's set on the frontend config
    },
    recipeList: [
      Passwordless.init({
        flowType: "^{form_flowType}",
        contactMethod: "^{form_contactMethod}",
        ^{form_contactMethod_sendCB_Node}
      }),
      Session.init(),
    ],
    isInServerlessEnv: true,
  }
}

module.exports.getBackendConfig = getBackendConfig;

```

</CoreInjector>
</PasswordlessBackendForm>

</AppInfoForm>

## 4) Set up your delivery method

The `See next step` comment above is a placeholder where you must provide a function that will send the user the information necessary to log in or sign up. This function receives several parameters:

- If you allow users to log in using both email adresses and phone numbers you have to provide both callbacks.
- You can get the email address from the `email` parameter or the phone number from the `phoneNumber` parameter.
- If you choose the OTP flow, the `userInputCode` will be defined and you should include it in the email, directing the user to enter it into the form on the device that started the sign in/up process.
- If you choose the Magic Link flow, then the `urlWithLinkCode` will be defined and you should include it in the email, directing the user to visit it. The user will be signed in on the device that visits the link instead of the one that started the process.
- If both flows are enabled, then you should include both options in the message, since the user can finish the sign in/up process both ways. 
- You can use the `codeLifetime` parameter to tell the user how long they have until the code expires. Do not forget to convert it to seconds (or minutes).
- Both the `preAuthSessionId` and the `context` parameters can be used for advanced customizations that need to fetch data from the database or access something saved earlier in the process.
- Any errors thrown from these function will be ignored.
