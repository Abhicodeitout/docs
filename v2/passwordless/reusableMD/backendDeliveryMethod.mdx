import BackendSDKTabs from "/src/components/tabs/BackendSDKTabs";
import TabItem from '@theme/TabItem';
import SnippetQuestionForm, {ConditionalSection} from "/src/components/snippetConfigForm/index";
import { passwordlessQuestions } from "/src/components/snippetConfigForm/passwordlessQuestions";

:::important
We are working on our own SMS / email delivery service which will make this step much easier. Until then, you have to send the SMS / emails yourself.
:::

The `See next step` comment above is a placeholder where you must provide a function that will send the user the information necessary to log in or sign up:

<SnippetQuestionForm questions={[passwordlessQuestions.contactMethod]}>

<BackendSDKTabs>

<TabItem value="nodejs">

<ConditionalSection conditions={{
    contactMethod: "PHONE"
}}>

```js
createAndSendCustomTextMessage: async (input, userCtx) => {
    let {
        // send the SMS to this phone number.
        // it's in E.164 format (see https://www.twilio.com/docs/glossary/what-e164)
        phoneNumber,

        /* this is the magic link string. It will be defined if the flowType 
        is "USER_INPUT_CODE_AND_MAGIC_LINK" or "MAGIC_LINK" */
        urlWithLinkCode,

        /* this is the OTP string. It will be defined if the flowType 
        is "USER_INPUT_CODE_AND_MAGIC_LINK" or "USER_INPUT_CODE" */
        userInputCode,

        /* This and the userCtx can be used for advanced customizations that need to
        fetch data from the database or access something saved earlier in the process. */
        preAuthSessionId,

        /* This is the time in milliseconds for how long the urlWithLinkCode or userInputCode
        is valid for. */
        codeLifetime
    } = input;

    // TODO: send SMS...
}
```

</ConditionalSection>
<ConditionalSection conditions={{
    contactMethod: "EMAIL"
}}>

```js
createAndSendCustomEmail: async (input, userCtx) => {
    let {
        // send the email to this email ID
        email,

        /* this is the magic link string. It will be defined if the flowType 
        is "USER_INPUT_CODE_AND_MAGIC_LINK" or "MAGIC_LINK" */
        urlWithLinkCode,

        /* this is the OTP string. It will be defined if the flowType 
        is "USER_INPUT_CODE_AND_MAGIC_LINK" or "USER_INPUT_CODE" */
        userInputCode,

        /* This and the userCtx can be used for advanced customizations that need to
        fetch data from the database or access something saved earlier in the process. */
        preAuthSessionId:,

        /* This is the time in milliseconds for how long the urlWithLinkCode or userInputCode
        is valid for.
            */
        codeLifetime
    } = input;

    // TODO: send email...
},
```

</ConditionalSection>

<ConditionalSection conditions={{
    contactMethod: "EMAIL_OR_PHONE"
}}>

```js
createAndSendCustomTextMessage: async (input, userCtx) => {
    let {
        // send the SMS to this phone number.
        // it's in E.164 format (see https://www.twilio.com/docs/glossary/what-e164)
        phoneNumber,

        /* this is the magic link string. It will be defined if the flowType 
        is "USER_INPUT_CODE_AND_MAGIC_LINK" or "MAGIC_LINK" */
        urlWithLinkCode,

        /* this is the OTP string. It will be defined if the flowType 
        is "USER_INPUT_CODE_AND_MAGIC_LINK" or "USER_INPUT_CODE" */
        userInputCode,

        /* This and the userCtx can be used for advanced customizations that need to
        fetch data from the database or access something saved earlier in the process. */
        preAuthSessionId,

        /* This is the time in milliseconds for how long the urlWithLinkCode or userInputCode
        is valid for. */
        codeLifetime
    } = input;

    // TODO: send SMS...
}

createAndSendCustomEmail: async (input, userCtx) => {
    let {
        // send the email to this email ID
        email,

        /* this is the magic link string. It will be defined if the flowType 
        is "USER_INPUT_CODE_AND_MAGIC_LINK" or "MAGIC_LINK" */
        urlWithLinkCode,

        /* this is the OTP string. It will be defined if the flowType 
        is "USER_INPUT_CODE_AND_MAGIC_LINK" or "USER_INPUT_CODE" */
        userInputCode,

        /* This and the userCtx can be used for advanced customizations that need to
        fetch data from the database or access something saved earlier in the process. */
        preAuthSessionId,

        /* This is the time in milliseconds for how long the urlWithLinkCode or userInputCode
        is valid for.
            */
        codeLifetime
    } = input;

    // TODO: send email...
},
```

</ConditionalSection>
</TabItem>
<TabItem value="go">
<ConditionalSection conditions={{
    contactMethod: "PHONE"
}}>

```go
CreateAndSendCustomTextMessage: func(
        // send the SMS to this phone number.
        // it's in E.164 format (see https://www.twilio.com/docs/glossary/what-e164)
        phoneNumber string,

        /* this is the OTP string. It will be defined if the flowType
        is "USER_INPUT_CODE_AND_MAGIC_LINK" or "USER_INPUT_CODE" */
        userInputCode,

        /* this is the magic link string. It will be defined if the flowType
        is "USER_INPUT_CODE_AND_MAGIC_LINK" or "MAGIC_LINK" */
        urlWithLinkCode *string,

        /* This is the time in milliseconds for how long the urlWithLinkCode or userInputCode is valid for. */
        codeLifetime uint64,

        /* preAuthSessionId and the userContext can be used for advanced customizations that need to
        fetch data from the database or access something saved earlier in the process. */
        preAuthSessionId string, userContext supertokens.UserContext) error {

    return nil
}
```

</ConditionalSection>
<ConditionalSection conditions={{
    contactMethod: "EMAIL"
}}>

```go
CreateAndSendCustomEmail: func(
        // send the email to this email ID
        email string,

        /* this is the OTP string. It will be defined if the flowType
        is "USER_INPUT_CODE_AND_MAGIC_LINK" or "USER_INPUT_CODE" */
        userInputCode,

        /* this is the magic link string. It will be defined if the flowType
        is "USER_INPUT_CODE_AND_MAGIC_LINK" or "MAGIC_LINK" */
        urlWithLinkCode *string,

        /* This is the time in milliseconds for how long the urlWithLinkCode or userInputCode is valid for. */
        codeLifetime uint64,

        /* preAuthSessionId and the userContext can be used for advanced customizations that need to
        fetch data from the database or access something saved earlier in the process. */
        preAuthSessionId string, userContext supertokens.UserContext) error {

    return nil
},
```

</ConditionalSection>

<ConditionalSection conditions={{
    contactMethod: "EMAIL_OR_PHONE"
}}>

```go
CreateAndSendCustomTextMessage: func(
        // send the SMS to this phone number.
        // it's in E.164 format (see https://www.twilio.com/docs/glossary/what-e164)
        phoneNumber string,

        /* this is the OTP string. It will be defined if the flowType
        is "USER_INPUT_CODE_AND_MAGIC_LINK" or "USER_INPUT_CODE" */
        userInputCode,

        /* this is the magic link string. It will be defined if the flowType
        is "USER_INPUT_CODE_AND_MAGIC_LINK" or "MAGIC_LINK" */
        urlWithLinkCode *string,

        /* This is the time in milliseconds for how long the urlWithLinkCode or userInputCode is valid for. */
        codeLifetime uint64,

        /* preAuthSessionId and the userContext can be used for advanced customizations that need to
        fetch data from the database or access something saved earlier in the process. */
        preAuthSessionId string, userContext supertokens.UserContext) error {

    return nil
}

CreateAndSendCustomEmail: func(
        // send the email to this email ID
        email string,

        /* this is the OTP string. It will be defined if the flowType
        is "USER_INPUT_CODE_AND_MAGIC_LINK" or "USER_INPUT_CODE" */
        userInputCode,

        /* this is the magic link string. It will be defined if the flowType
        is "USER_INPUT_CODE_AND_MAGIC_LINK" or "MAGIC_LINK" */
        urlWithLinkCode *string,

        /* This is the time in milliseconds for how long the urlWithLinkCode or userInputCode is valid for. */
        codeLifetime uint64,

        /* preAuthSessionId and the userContext can be used for advanced customizations that need to
        fetch data from the database or access something saved earlier in the process. */
        preAuthSessionId string, userContext supertokens.UserContext) error {

    return nil
},
```

</ConditionalSection>
</TabItem>
<TabItem value="python">

```python
python_todo
```

</TabItem>
</BackendSDKTabs>

</SnippetQuestionForm>