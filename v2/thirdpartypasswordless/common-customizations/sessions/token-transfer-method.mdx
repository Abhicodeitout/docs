---
id: token-transfer-method
title: Token transfer methods
hide_title: true
show_ui_switcher: true
---

<!-- COPY DOCS -->
<!-- ./session/common-customizations/sessions/token-transfer-method.mdx -->

import BackendSDKTabs from "/src/components/tabs/BackendSDKTabs"
import TabItem from '@theme/TabItem';
import NpmOrScriptTabs from "/src/components/tabs/NpmOrScriptTabs"
import AngularUIImplementation from "/src/components/reusableSnippets/angularUIImplementation"
import {Answer}from "/src/components/question"
import {PreBuiltOrCustomUISwitcher, PreBuiltUIContent, CustomUIContent} from "/src/components/preBuiltOrCustomUISwitcher"
import FrontendPreBuiltUITabs from "/src/components/tabs/FrontendPreBuiltUITabs"
import FrontendCustomUITabs from "/src/components/tabs/FrontendCustomUITabs"
import FrontendMobileSubTabs from "/src/components/tabs/FrontendMobileSubTabs"

<!-- TODO: re-think title -->
# Token transfer methods

:::caution
We recommend cookie-based sessions in browsers because header-based sessions require saving the access and refresh tokens in storage vulnerable to XSS attacks.
:::

When creating/authorising sessions, the SDK has to choose to send the tokens to the frontend by cookies or custom headers. This choice is ultimately controlled by the backend, but it follows a preference set in the frontend configuration.

## Frontend configuration

You can provide a `tokenTransferMethod` property in the configuration of the Session recipe to set the preferred token transfer method, which will be sent to the backend with every request in the `st-auth-mode` header.

By default, the backend follows this preference.

We recommend using cookie-based sessions in browsers and header-based sessions in mobile apps and environments where you can't or prefer not to use the built-in cookie manager.

<PreBuiltOrCustomUISwitcher>

<PreBuiltUIContent>

<FrontendPreBuiltUITabs>

<TabItem value="reactjs">

```tsx
import SuperTokens from "supertokens-auth-react";
import Session from "supertokens-auth-react/recipe/session";

SuperTokens.init({
    appInfo: {
        apiDomain: "...",
        appName: "...",
        websiteDomain: "..."
    },
    recipeList: [
        Session.init({
            // highlight-next-line
            tokenTransferMethod: "header"
        })
    ]
});
```

</TabItem>

<TabItem value="angular">

:::important
`SuperTokens` config changes need to be reflected in both `supertokens-auth-react` and `supertokens-web-js` configs.
:::

```tsx title="/app/auth/supertokensAuthComponent.tsx"
import SuperTokens from "supertokens-auth-react";
import Session from "supertokens-auth-react/recipe/session";

SuperTokens.init({
    appInfo: {
        apiDomain: "...",
        appName: "...",
        websiteDomain: "..."
    },
    recipeList: [
        Session.init({
            // highlight-next-line
            tokenTransferMethod: "header"
        })
    ]
});
```

```tsx title="/app/app.component.ts"
import SuperTokens from "supertokens-web-js";
import Session from "supertokens-web-js/recipe/session";

SuperTokens.init({
    appInfo: {
        apiDomain: "...",
        appName: "...",
    },
    recipeList: [
        Session.init({
            // highlight-next-line
            tokenTransferMethod: "header"
        })
    ],
})
```

</TabItem>

<TabItem value="vue">

:::important
`SuperTokens` config changes need to be reflected in both `supertokens-auth-react` and `supertokens-web-js` configs.
:::

```tsx title="/components/Supertokens.tsx"
import SuperTokens from "supertokens-auth-react";
import Session from "supertokens-auth-react/recipe/session";

SuperTokens.init({
    appInfo: {
        apiDomain: "...",
        appName: "...",
        websiteDomain: "..."
    },
    recipeList: [
        Session.init({
            // highlight-next-line
            tokenTransferMethod: "header"
        })
    ]
});
```

```tsx title="/main.ts"
import SuperTokens from "supertokens-web-js";
import Session from "supertokens-web-js/recipe/session";

SuperTokens.init({
    appInfo: {
        apiDomain: "...",
        appName: "...",
    },
    recipeList: [
        Session.init({
            // highlight-next-line
            tokenTransferMethod: "header"
        })
    ],
})
```

</TabItem>

</FrontendPreBuiltUITabs>

</PreBuiltUIContent>

<CustomUIContent>

<FrontendCustomUITabs>
<TabItem value="web">

<NpmOrScriptTabs>
<TabItem value="npm">

```tsx
import SuperTokens from "supertokens-web-js";
import Session from "supertokens-web-js/recipe/session";

SuperTokens.init({
    appInfo: {
        apiDomain: "...",
        appName: "...",
    },
    recipeList: [
        Session.init({
            // highlight-next-line
            tokenTransferMethod: "header"
        })
    ],
})
```

</TabItem>
<TabItem value="script">

```tsx
import supertokens from "supertokens-web-js-script";
import supertokensSession from "supertokens-web-js-script/recipe/session";
supertokens.init({
    appInfo: {
        apiDomain: "...",
        appName: "...",
    },
    recipeList: [
        supertokensSession.init({
            // highlight-next-line
            tokenTransferMethod: "header",
        })
    ],
})
```

</TabItem>
</NpmOrScriptTabs>

</TabItem>

<TabItem value="mobile">

:::caution
TODO
:::

</TabItem>

</FrontendCustomUITabs>

</CustomUIContent>

</PreBuiltOrCustomUISwitcher>


## Backend configuration

:::important
By returning a fixed value from `getTokenTransferMethod` you can strictly control the allowed session types, but changing this value can result in logging out users.
:::

You can provide a `getTokenTransferMethod` callback in the configuration of the Session recipe. This callback controls:
- The type of sessions `createNewSession` and the login APIs create.
- The types of sessions allowed when verifying sessions.

By default, we allow both cookie and header sessions during authorisation and follow the preference of the frontend while creating new sessions. The token transfer method of the frontend is attached to requests in the `st-auth-mode` header.

<BackendSDKTabs>
<TabItem value="nodejs">

```tsx
import SuperTokens from "supertokens-node";
import Session from "supertokens-node/recipe/session";

SuperTokens.init({
    appInfo: {
        apiDomain: "...",
        appName: "...",
        websiteDomain: "..."
    },
    recipeList: [
        Session.init({
            // highlight-start
            getTokenTransferMethod: () => "header",
            // highlight-end
        })
    ]
});
```
</TabItem>
<TabItem value="go">

```go
!!!TODO
import (
	"github.com/supertokens/supertokens-golang/recipe/session"
	"github.com/supertokens/supertokens-golang/recipe/session/sessmodels"
	"github.com/supertokens/supertokens-golang/supertokens"
)

func main() {
	// highlight-start
	cookieSameSite := "none"
	antiCSRF := "VIA_TOKEN"
	// highlight-end

	supertokens.Init(supertokens.TypeInput{
		RecipeList: []supertokens.Recipe{
			session.Init(&sessmodels.TypeInput{
				// highlight-start
				CookieSameSite: &cookieSameSite,
				AntiCsrf:       &antiCSRF,
				// highlight-end
			}),
		},
	})
}
```
</TabItem>
<TabItem value="python">

```python
!!!TODO
from supertokens_python import init, InputAppInfo
from supertokens_python.recipe import session


init(
    app_info=InputAppInfo(api_domain="...", app_name="...", website_domain="..."),
    framework='...', # type: ignore
    recipe_list=[
        session.init(
            # highlight-start
            cookie_same_site='none',
            anti_csrf='VIA_TOKEN'
            # highlight-end
        )
    ]
)
```

</TabItem>
</BackendSDKTabs>
