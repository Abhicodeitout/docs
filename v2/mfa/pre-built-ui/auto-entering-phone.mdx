---
id: auto-entering-phone
title: "5) Automatically sending OTP on sign in"
hide_title: true
---

import FrontendSDKTabs from "/src/components/tabs/FrontendSDKTabs"
import TabItem from '@theme/TabItem';
import AppInfoForm from "/src/components/appInfoForm"
import Disclaimer from "./disclaimer.mdx"

# 5) Automatically sending OTP on sign in

<Disclaimer />

The final piece of the puzzle is to modify the Passwordless UI to:
- Send the OTP automatically to the user's phone number after sign in. However during sign up, we want the user to enter their phone number (which is what happens by default anyway).
- Remove the change phone number button on the OTP screen (since we already have a "Login with another account" button)
- Change the "Sign Up or Log In" header to say "Second factor auth". 

All of these can be achieved by using [React component override feature](https://supertokens.com/docs/passwordless/advanced-customizations/react-component-override/about) in the `Passwordless.init` call.

## Sending the OTP automatically

```tsx
import React, {useEffect, useState} from "react"
import Passwordless from "supertokens-auth-react/recipe/passwordless";
import Session from "supertokens-auth-react/recipe/session";
import ThirdPartyEmailPassword from "supertokens-auth-react/recipe/thirdpartyemailpassword";

Passwordless.init({
    signInUpFeature: {
        disableDefaultUI: true,
    },
    getRedirectionURL: async function (context) {
        if (context.action === "SIGN_IN_AND_UP") {
            return "/second-factor";
        }
    },
    contactMethod: "PHONE",
    override: {
        components: {
            PasswordlessPhoneForm_Override: ({ DefaultComponent, ...props }) => {
                let [showDefaultUI, setShowDefaultUI] = useState(false);
                useEffect(() => {
                    Session.getAccessTokenPayloadSecurely()
                        .then(async (accessTokenPayload) => {
                            let phoneNumber = accessTokenPayload.phoneNumber;
                            if (phoneNumber !== undefined) {
                                // This will send the user an OTP and also display the enter OTP screen.
                                await props.recipeImplementation.createCode({
                                    phoneNumber: phoneNumber,
                                    userContext: {},
                                });
                            } else {
                                setShowDefaultUI(true);
                            }
                        })
                        .catch((err) => {
                            // it can come here if a session doesn't exist.
                            // in this case, the screen we should redirect to the
                            // first login challenge
                            ThirdPartyEmailPassword.redirectToAuth({
                                redirectBack: false,
                            });
                        });
                }, [props.recipeImplementation]);
                if (showDefaultUI) {
                    return <DefaultComponent {...props} />;
                }
                return null;
            },
        },
    },
})
```