---
id: user-creation
title: User Creation
hide_title: true
---

import CoreInjector from "/src/components/coreInjector"

# User Creation

<CoreInjector>

## Email Password Migration

SuperTokens allows you to import users with password hashes generated with `BCrypt`, `Argon2` and `Firebase SCrypt` with our import user API.
You can find the API spec [here](https://app.swaggerhub.com/apis/supertokens/CDI/2.16.0#/EmailPassword%20Recipe/userImport).

### Migrating users With Argon2 or BCrypt Password hashes

For users with `BCrypt` or `Argon2` password hashes you can use the following curl command to import your user.

```bash
curl -XPOST -H 'api-key: your_api_key' -H "Content-type: application/json" -d '{ 
  "email": "johndoe@gmail.com",
  "passwordHash": "$argon2i$v=19$m=16,t=2,p=1$dGhpcyBpcyB0aGUgaGFzaA$vONQ4YH3m0WFSN3sCoMZ+g",
}' '^{coreInjector_uri_without_quotes}/recipe/user/passwordhash/import'
```

### Migrating users with Firebase SCrypt Password hashes

Importing users from Firebases requires an update to your supertokens core config and formatting the input password hash.

- Step 1: Retrive your Firebase password hashing parameters from your dashboard.
  <img src="/img/migration/firebase_password_hashing_params.png" />
- Step 2: Update the config of your SuperTokens core instance to include the `base64_signer_key` from your firebase hashing parameters.
- Step 3: SuperTokens requires firebase password hashes to be in a specific format to be parsed.
   The required format is:
   
  `$f_scrypt + $firebasePasswordHash + $salt + $m=memoryCost + $r=rounds + $s=saltSeparator`

  For example:

  Your exported firebase user has the following credentials:
  ```json
  {
    "users": [
      {
        "localId": "userId",
        "email": "johnDoe@example.com"
        "passwordHash": "9Y8ICWcqbzmI42DxV1jpyEjbrJPG8EQ6nI6oC32JYz+/dd7aEjI/R7jG9P5kYh8v9gyqFKaXMDzMg7eLCypbOA==",
        "salt": "/cj0jC1br5o4+w==",
      }
    ]
  }
  ```

  The memory cost, rounds and salt separator retrived from the password hashing config are:
  ```json
  {
    mem_cost: 14,
    rounds: 8,
    base64_salt_separator: "Bw=="
  }
  ```
  
  The password hash would be the following: `$f_scrypt$9Y8ICWcqbzmI42DxV1jpyEjbrJPG8EQ6nI6oC32JYz+/dd7aEjI/R7jG9P5kYh8v9gyqFKaXMDzMg7eLCypbOA==$/cj0jC1br5o4+w==$m=14$r=8$s=Bw==`

- Step 4: Run the following `curl` command to import the user

  ```bash
  curl -XPOST -H 'api-key: your_api_key' -H "Content-type: application/json" -d '{ 
    "email": "johndoe@gmail.com",
    "passwordHash": "$f_scrypt$9Y8ICWcqbzmI42DxV1jpyEjbrJPG8EQ6nI6oC32JYz+/dd7aEjI/R7jG9P5kYh8v9gyqFKaXMDzMg7eLCypbOA==$/cj0jC1br5o4+w==$m=14$r=8$s=Bw==",
    "hashingAlgorithm": "firebase_scrypt"
  }' '^{coreInjector_uri_without_quotes}/recipe/user/passwordhash/import'
  ```

<!-- COPY SECTION -->
<!-- ./thirdpartyemailpassword/migration/account-creation/user-creation.mdx -->
<!-- 2 -->

## ThirdParty Migration

To migrate users with social accounts we can simply call the `signInUp` API with the provider Id and the user's third party userId.

For example:

If we were importing a user with Google as their provider with their third party userId being `106347997792363870000`, we can run the following curl command to import the user.  

  ```bash
  curl -XPOST -H 'api-key: your_api_key' -H "Content-type: application/json" -d '{ 
    "thirdPartId": "google",
    "thirdPartyUserId": "106347997792363870000",
    "email": {
      id: "johnDoe@example.com"
    }
  }' '^{coreInjector_uri_without_quotes}/recipe/user/passwordhash/import'
  ```
<!-- END COPY SECTION -->

</CoreInjector>