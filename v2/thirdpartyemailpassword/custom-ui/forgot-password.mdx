---
id: forgot-password
title: Forgot Password flow
hide_title: true
---

<!-- COPY DOCS -->
<!-- ./thirdpartyemailpassword/custom-ui/forgot-password.mdx -->

import FrontendCustomUITabs from "/src/components/tabs/FrontendCustomUITabs"
import TabItem from '@theme/TabItem';
import NpmOrScriptTabs from "/src/components/tabs/NpmOrScriptTabs"
import AppInfoForm from "/src/components/appInfoForm"

# Forgot Password flow

There are two steps in the forgot password flow:
- Sending the password reset email to a user's email ID
- Once the user clicks the link, asking them for and updating their password.

## Step 1: Sending the password reset email

<FrontendCustomUITabs>
<TabItem value="web">

You should create a new screen on your website that asks the user to enter their email to which an email will be sent. This screen should ideally be linked to from the sign in form.

Once the user has enters their email, you can use the following function to send a reset password email to that user:

<NpmOrScriptTabs>
<TabItem value="npm">

```tsx
import { sendPasswordResetEmail } from "supertokens-web-js/recipe/^{codeImportRecipeName}";

async function sendEmailClicked(email: string) {
    try {
        let response = await sendPasswordResetEmail({
            formFields: [{
                id: "email",
                value: email
            }]
        });

        if (response.status === "FIELD_ERROR") {
            // one of the input formFields failed validaiton
            response.formFields.forEach(formField => {
                if (formField.id === "email") {
                    // Email validation failed (for example incorrect email syntax).
                    window.alert(formField.error)
                }
            })
        } else {
            // reset password email sent.
            window.alert("Please check your email for the password reset link")
        }
    } catch (err: any) {
        if (err.isSuperTokensGeneralError === true) {
            // this may be a custom error message sent from the API by you.
            window.alert(err.message);
        } else {
            window.alert("Oops! Something went wrong.");
        }
    }
}
```

</TabItem>
<TabItem value="script">

```tsx
import supertokens^{recipeNameCapitalLetters} from "supertokens-web-js-script/recipe/^{codeImportRecipeName}";
async function signUpClicked(email: string) {
    try {
        let response = await supertokens^{recipeNameCapitalLetters}.sendPasswordResetEmail({
            formFields: [{
                id: "email",
                value: email
            }]
        });

        if (response.status === "FIELD_ERROR") {
            // one of the input formFields failed validaiton
            response.formFields.forEach(formField => {
                if (formField.id === "email") {
                    // Email validation failed (for example incorrect email syntax).
                    window.alert(formField.error)
                }
            })
        } else {
            // reset password email sent.
            window.alert("Please check your email for the password reset link")
        }
    } catch (err: any) {
        if (err.isSuperTokensGeneralError === true) {
            // this may be a custom error message sent from the API by you.
            window.alert(err.message);
        } else {
            window.alert("Oops! Something went wrong.");
        }
    }
}
```

</TabItem>
</NpmOrScriptTabs>

</TabItem>

<TabItem value="mobile">

<AppInfoForm askForAPIDomain>

You should create a new screen on your app that asks the user to enter their email to which an email will be sent. This screen should ideally be linked to from the sign in form.

Once the user has enters their email, you can call the following API to send a reset password email to that user:

```bash
curl --location --request POST '^{form_apiDomain}^{form_apiBasePath}/user/password/reset/token' \
--header 'rid: ^{codeImportRecipeName}' \
--header 'Content-Type: application/json' \
--data-raw '{
    "formFields": [{
        "id": "email",
        "value": "john@example.com"
    }]
}'
```

</AppInfoForm>

The response body from the API call has a `status` property in it:
- `status: "OK"`: If the user exists in SuperTokens, an email has been sent to them.
- `status: "FIELD_ERROR"`: The input email failed the backend validation logic (i.e. the email is not a valid email from a syntax point of view). You want to show the user an error next to the input form field.
- `status: "GENERAL_ERROR"`: This is only possible if you have overriden the backend API to send back a custom error message which should be displayed on the frontend.

</TabItem>

</FrontendCustomUITabs>

:::important
If the input email ID does not belong to a user who signed up previously, SuperTokens will not send them an email. However, the frontend will still receive an `"OK"` status back. 
:::

### Changing the password reset link
By default, the password reset link will point to the `websiteDomain` that is configured on the backend, on the `/auth/reset-password` route (where `/auth` is the default value of `websiteBasePath`).

If you want to change this to a different path, a different domain, or deep link it to your mobile / desktop app, then you can do so on the backend in the following way:

TODO

## Step 2: Updating the user's password

TODO
- Deep linking for mobile apps
- Setting the new password.

## See also

- [Post sign in / sign up action](TODO)
- [Adding extra form fields in sign up](TODO)
- [Changing fields validation logic on the backend](TODO)
- [Password hashing algorithms](TODO)
- [Disabling sign up on the backend](TODO)
- [Customising user ID format](TODO)

